<!DOCTYPE html>
<html>

<head>
    <title>AI Habit Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=999">

</head>

<body>
    <div class="container">

        <h1>AI Habit Tracker</h1>



        {% with messages = get_flashed_messages(category_filter=["streak"], with_categories=false) %}
        {% if messages %}
        <div class="milestone-banner">
            {{ messages[-1] }}
        </div>
        {% endif %}
        {% endwith %}


        <form action="/add" method="POST" class="add-form">
            <input type="text" name="habit_name" placeholder="New habit" required>
            <button type="submit">Add Habit</button>
        </form>

        {% for habit in habits %}
        <div class="card">
            <div class="title">{{ habit.name }}</div>

            <div class="stats">
                <span>ğŸ”¥ {{ habit.streak }}</span>
                <span>ğŸ† {{ habit.longest_streak }}</span>
            </div>

            {% if habit.last_done == today %}
            <div class="done-badge">Done today</div>
            {% else %}
            <form action="/done/{{ habit.id }}" method="POST">
                <button class="primary">Mark Done</button>
            </form>
            {% endif %}

            <form action="/delete/{{ habit.id }}" method="POST" onsubmit="return confirm('Delete this habit?');">
                <button class="danger">Delete</button>
            </form>
        </div>
        {% endfor %}

    </div>
</body>

</html>